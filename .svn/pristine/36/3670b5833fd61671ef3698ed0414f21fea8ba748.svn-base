<?php
/**
 * XXT脚本控制器
 */
namespace Common\Controller;
use Think\Controller;

class XxtbaseController extends Controller {

	/**
	 * 初步通信密匙
	 */
	public function __construct(){
		//api记录行为日志
		$param = I('');
		$param = serialize($param);
		$post_url = $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
        $post_ip = get_client_ip();

		$add = array(
			'post_url'=>$post_url,
			'post_ip'=>$post_ip,
			'post_param'=>$param,
			'createtime'=>NOW_TIME
		);
		M('xxt_api_post_log')->add($add);
	}

	/**
	 * json格式返回信息
	 * @return [type] [description]
	 */
	public function ajaxReturn($return){
		echo json_encode($return);
		exit();
	}
}